{
  "contract": {
    "address": "ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0",
    "name": "bitflow-vault-core",
    "network": "testnet",
    "explorer": "https://explorer.hiro.so/txid/ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core?chain=testnet"
  },
  "readOnlyExamples": [
    {
      "id": 1,
      "name": "Get Contract Version",
      "function": "get-contract-version",
      "parameters": [],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core get-contract-version)",
      "expectedResult": "\"1.0.0\"",
      "costSTX": 0
    },
    {
      "id": 2,
      "name": "Get Total Deposits",
      "function": "get-total-deposits",
      "parameters": [],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core get-total-deposits)",
      "expectedResult": "uint (total deposits in micro-STX)",
      "costSTX": 0
    },
    {
      "id": 3,
      "name": "Get Total Repaid",
      "function": "get-total-repaid",
      "parameters": [],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core get-total-repaid)",
      "expectedResult": "uint (total repaid in micro-STX)",
      "costSTX": 0
    },
    {
      "id": 4,
      "name": "Get Total Liquidations",
      "function": "get-total-liquidations",
      "parameters": [],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core get-total-liquidations)",
      "expectedResult": "uint (number of liquidations)",
      "costSTX": 0
    },
    {
      "id": 5,
      "name": "Get Protocol Stats",
      "function": "get-protocol-stats",
      "parameters": [],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core get-protocol-stats)",
      "expectedResult": "{total-deposits: uint, total-repaid: uint, total-liquidations: uint}",
      "costSTX": 0
    },
    {
      "id": 6,
      "name": "Get Protocol Metrics",
      "function": "get-protocol-metrics",
      "parameters": [],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core get-protocol-metrics)",
      "expectedResult": "tuple with complete metrics",
      "costSTX": 0
    },
    {
      "id": 7,
      "name": "Get Volume Metrics",
      "function": "get-volume-metrics",
      "parameters": [],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core get-volume-metrics)",
      "expectedResult": "tuple with volume data",
      "costSTX": 0
    },
    {
      "id": 8,
      "name": "Get User Deposit",
      "function": "get-user-deposit",
      "parameters": [
        {"name": "user", "type": "principal", "value": "ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core get-user-deposit 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0)",
      "expectedResult": "uint (user's deposit in micro-STX)",
      "costSTX": 0
    },
    {
      "id": 9,
      "name": "Get User Loan",
      "function": "get-user-loan",
      "parameters": [
        {"name": "user", "type": "principal", "value": "ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core get-user-loan 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0)",
      "expectedResult": "(some {amount: uint, interest-rate: uint, start-block: uint, term-end: uint}) or none",
      "costSTX": 0
    },
    {
      "id": 10,
      "name": "Calculate Required Collateral (100 STX)",
      "function": "calculate-required-collateral",
      "parameters": [
        {"name": "borrow-amount", "type": "uint", "value": "u100000000", "description": "100 STX"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core calculate-required-collateral u100000000)",
      "expectedResult": "u150000000 (150 STX required)",
      "costSTX": 0
    },
    {
      "id": 11,
      "name": "Get Max Borrow Amount",
      "function": "get-max-borrow-amount",
      "parameters": [
        {"name": "user", "type": "principal", "value": "ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core get-max-borrow-amount 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0)",
      "expectedResult": "uint (maximum borrowable based on deposit)",
      "costSTX": 0
    },
    {
      "id": 12,
      "name": "Calculate Health Factor",
      "function": "calculate-health-factor",
      "parameters": [
        {"name": "user", "type": "principal", "value": "ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0"},
        {"name": "stx-price", "type": "uint", "value": "u100", "description": "$1.00"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core calculate-health-factor 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0 u100)",
      "expectedResult": "(some uint) health factor or none",
      "costSTX": 0
    },
    {
      "id": 13,
      "name": "Is Liquidatable",
      "function": "is-liquidatable",
      "parameters": [
        {"name": "user", "type": "principal", "value": "ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0"},
        {"name": "stx-price", "type": "uint", "value": "u100"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core is-liquidatable 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0 u100)",
      "expectedResult": "true or false",
      "costSTX": 0
    },
    {
      "id": 14,
      "name": "Get Repayment Amount",
      "function": "get-repayment-amount",
      "parameters": [
        {"name": "user", "type": "principal", "value": "ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core get-repayment-amount 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0)",
      "expectedResult": "(some {principal: uint, interest: uint, total: uint}) or none",
      "costSTX": 0
    }
  ],
  "writeExamples": [
    {
      "id": 15,
      "name": "Deposit 10 STX",
      "function": "deposit",
      "parameters": [
        {"name": "amount", "type": "uint", "value": "u10000000", "description": "10 STX"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core deposit u10000000)",
      "expectedResult": "(ok true)",
      "costSTX": 10,
      "prerequisites": "Have 10+ STX in wallet"
    },
    {
      "id": 16,
      "name": "Deposit 100 STX",
      "function": "deposit",
      "parameters": [
        {"name": "amount", "type": "uint", "value": "u100000000", "description": "100 STX"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core deposit u100000000)",
      "expectedResult": "(ok true)",
      "costSTX": 100,
      "prerequisites": "Have 100+ STX in wallet"
    },
    {
      "id": 17,
      "name": "Deposit 1,000 STX",
      "function": "deposit",
      "parameters": [
        {"name": "amount", "type": "uint", "value": "u1000000000", "description": "1,000 STX"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core deposit u1000000000)",
      "expectedResult": "(ok true)",
      "costSTX": 1000,
      "prerequisites": "Have 1,000+ STX in wallet"
    },
    {
      "id": 18,
      "name": "Borrow 50 STX (5% APR, 30 days)",
      "function": "borrow",
      "parameters": [
        {"name": "amount", "type": "uint", "value": "u50000000", "description": "50 STX"},
        {"name": "interest-rate", "type": "uint", "value": "u500", "description": "5% APR (500 basis points)"},
        {"name": "term-days", "type": "uint", "value": "u30", "description": "30 days"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core borrow u50000000 u500 u30)",
      "expectedResult": "(ok true)",
      "costSTX": 0,
      "receivesSTX": 50,
      "prerequisites": "Must have 75+ STX deposited, no active loan"
    },
    {
      "id": 19,
      "name": "Borrow 100 STX (10% APR, 90 days)",
      "function": "borrow",
      "parameters": [
        {"name": "amount", "type": "uint", "value": "u100000000", "description": "100 STX"},
        {"name": "interest-rate", "type": "uint", "value": "u1000", "description": "10% APR"},
        {"name": "term-days", "type": "uint", "value": "u90", "description": "90 days"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core borrow u100000000 u1000 u90)",
      "expectedResult": "(ok true)",
      "costSTX": 0,
      "receivesSTX": 100,
      "prerequisites": "Must have 150+ STX deposited, no active loan"
    },
    {
      "id": 20,
      "name": "Borrow 500 STX (7.5% APR, 60 days)",
      "function": "borrow",
      "parameters": [
        {"name": "amount", "type": "uint", "value": "u500000000", "description": "500 STX"},
        {"name": "interest-rate", "type": "uint", "value": "u750", "description": "7.5% APR"},
        {"name": "term-days", "type": "uint", "value": "u60", "description": "60 days"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core borrow u500000000 u750 u60)",
      "expectedResult": "(ok true)",
      "costSTX": 0,
      "receivesSTX": 500,
      "prerequisites": "Must have 750+ STX deposited, no active loan"
    },
    {
      "id": 21,
      "name": "Withdraw 25 STX",
      "function": "withdraw",
      "parameters": [
        {"name": "amount", "type": "uint", "value": "u25000000", "description": "25 STX"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core withdraw u25000000)",
      "expectedResult": "(ok true)",
      "costSTX": 0,
      "receivesSTX": 25,
      "prerequisites": "Must have 25+ STX deposited, no active loan"
    },
    {
      "id": 22,
      "name": "Repay Loan",
      "function": "repay",
      "parameters": [],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core repay)",
      "expectedResult": "(ok {principal: uint, interest: uint, total: uint})",
      "costSTX": "varies",
      "prerequisites": "Must have active loan, sufficient STX in wallet"
    },
    {
      "id": 23,
      "name": "Liquidate Undercollateralized Loan",
      "function": "liquidate",
      "parameters": [
        {"name": "borrower", "type": "principal", "value": "ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM"},
        {"name": "stx-price", "type": "uint", "value": "u100", "description": "$1.00"}
      ],
      "clarityCode": "(contract-call? 'ST1M46W6CVGAMH3ZJD3TKMY5KCY48HWAZK1GA0CF0.bitflow-vault-core liquidate 'ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM u100)",
      "expectedResult": "(ok {seized-collateral: uint, paid: uint, bonus: uint})",
      "costSTX": "loan amount + 5%",
      "prerequisites": "Target must have health factor < 110%"
    }
  ],
  "conversionTables": {
    "stxToMicroSTX": {
      "1": "u1000000",
      "10": "u10000000",
      "50": "u50000000",
      "100": "u100000000",
      "500": "u500000000",
      "1000": "u1000000000",
      "5000": "u5000000000",
      "10000": "u10000000000"
    },
    "interestRateToBasisPoints": {
      "1%": "u100",
      "5%": "u500",
      "7.5%": "u750",
      "10%": "u1000",
      "15%": "u1500",
      "25%": "u2500",
      "50%": "u5000",
      "100%": "u10000"
    }
  },
  "errorCodes": {
    "u101": {"constant": "ERR-INSUFFICIENT-BALANCE", "description": "Not enough deposited STX"},
    "u102": {"constant": "ERR-INVALID-AMOUNT", "description": "Amount must be > 0"},
    "u103": {"constant": "ERR-ALREADY-HAS-LOAN", "description": "User already has active loan"},
    "u105": {"constant": "ERR-INSUFFICIENT-COLLATERAL", "description": "Need 150% collateral ratio"},
    "u106": {"constant": "ERR-NO-ACTIVE-LOAN", "description": "No active loan to repay"},
    "u107": {"constant": "ERR-NOT-LIQUIDATABLE", "description": "Health factor > 110%"},
    "u108": {"constant": "ERR-LIQUIDATE-OWN-LOAN", "description": "Cannot liquidate own loan"},
    "u110": {"constant": "ERR-INVALID-INTEREST-RATE", "description": "Rate exceeds 100% APR"},
    "u111": {"constant": "ERR-INVALID-TERM", "description": "Term must be 1-365 days"}
  },
  "constants": {
    "MIN_COLLATERAL_RATIO": 150,
    "LIQUIDATION_THRESHOLD": 110,
    "MAX_INTEREST_RATE": 10000,
    "MIN_TERM_DAYS": 1,
    "MAX_TERM_DAYS": 365
  }
}
